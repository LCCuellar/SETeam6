CREATE TABLE USER (
	Uemail CHAR(30) UNIQUE NOT NULL,
	Ufname CHAR(30) NOT NULL,
	Ulname CHAR(30) NOT NULL,
	Upassword CHAR(30) NOT NULL,
	
	PRIMARY KEY(Uemail)
) ENGINE = InnoDB;

CREATE TABLE ADMIN (
	Aemail CHAR(30) UNIQUE NOT NULL,
	
	PRIMARY KEY(Aemail),
	FOREIGN KEY(Aemail) REFERENCES USER(Uemail)
) ENGINE = InnoDB;

CREATE TABLE REGISTERED_USER (
	RUemail CHAR(30) UNIQUE NOT NULL,
	RUorganization CHAR(30) NOT NULL,
	RUskillLevel CHAR(30) NOT NULL,
	
	PRIMARY KEY(RUemail),
	FOREIGN KEY(RUemail) REFERENCES USER(Uemail)
) ENGINE = InnoDB;

CREATE TABLE SERVER (
	SipAddress CHAR(30) UNIQUE NOT NULL,
	Susername CHAR(30) NOT NULL,
	Spassword CHAR(30) NOT NULL,
	Sstatus CHAR(30) NOT NULL,
	
	PRIMARY KEY(SipAddress)
) ENGINE = InnoDB;

CREATE TABLE VIRTUAL_MACHINE (
	VMname CHAR(30) UNIQUE NOT NULL,
	VMvrdp CHAR(30) UNIQUE NOT NULL,
	VMsnapshot CHAR(30) NOT NULL,
	VMhost CHAR(30) NOT NULL,
	
	PRIMARY KEY(VMname),
	FOREIGN KEY(VMhost) REFERENCES SERVER(SipAddress)
) ENGINE = InnoDB;

CREATE TABLE NETWORK_ADAPTER (
	NAstring CHAR(30) UNIQUE NOT NULL,
	NAvmName CHAR(30) NOT NULL,
	
	PRIMARY KEY(NAstring, NAvmName),
	FOREIGN KEY(NAvmName) REFERENCES VIRTUAL_MACHINE(VMname)
) ENGINE = InnoDB;

CREATE TABLE WORKSHOP (
	WGname CHAR(30) NOT NULL,
	WUname CHAR(30) UNIQUE NOT NULL,
	Wdescription CHAR(30) NOT NULL,
	Wtype CHAR(30) NOT NULL,
	Whost CHAR(30) NOT NULL,
	Wstatus CHAR(30) NOT NULL,
	WpublishDate DATE NOT NULL,
	
	PRIMARY KEY(WGname, WUname),
	FOREIGN KEY(Whost) REFERENCES SERVER(SipAddress)
) ENGINE = InnoDB;

CREATE TABLE WORKSHOP_HISTORY (
	WHwuName CHAR(30) NOT NULL,
	WHruEmail CHAR(30) NOT NULL,
	
	PRIMARY KEY(WHwuName, WHruEmail),
	FOREIGN KEY(WHwuName) REFERENCES WORKSHOP(WUname),
	FOREIGN KEY(WHruEmail) REFERENCES REGISTERED_USER(RUemail)
) ENGINE = InnoDB;

CREATE TABLE REFERENCE_MATERIAL (
	RMfileName CHAR(30) UNIQUE NOT NULL,
	RMwname CHAR(30) NOT NULL,
	
	PRIMARY KEY(RMfileName, RMwname),
	FOREIGN KEY(RMwname) REFERENCES WORKSHOP(WUname)
) ENGINE = InnoDB;

CREATE TABLE STATISTICS (
	SdateCreated DATE UNIQUE NOT NULL,
	SavailableConn INT NOT NULL,
	SunusedConn FLOAT NOT NULL,
	SusedConn FLOAT NOT NULL,
	ScpuUsage FLOAT NOT NULL,
	SmemUsage FLOAT NOT NULL,
	
	PRIMARY KEY(SdateCreated)
) ENGINE = InnoDB;

CREATE TABLE CLONE(
	CvmName CHAR(30) UNIQUE NOT NULL,
	CnumOfClones INT NOT NULL,
	CVRDPseed INT NOT NULL
) ENGINE = InnoDB;